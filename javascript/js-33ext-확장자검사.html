<!DOCTYPE HTML>
<html lang="ko">
<head>
	<meta charset="utf-8" />
	<title> js-ext-확장자검사.html
 </title>
</head>
<body>
<form name="frm" method="" action="">
	<p>파일 첨부 : <input type="file"  name="extFile"/></p>
	<p>
		<button onclick="chkFile('img','★이미지')">이미지파일 검사</button>
	</p>
	<p>
		<button onclick="chkFile('office','★오피스')">오피스파일 검사</button>
	</p>
</form>

<script>
/*
업로드한 파일이 이미지 파일인지 오피스 파일인지를 검사해주는 함수를 만들어서 해당 파일이 어디에 속하는지 경고창으로 띄워주는 스크립트
 아웃풋 : 경고창으로 해당 파일이 이미지 파일이면 "이미지 파일입니다" 라는 경고창을
								 이미지 파일이 아니면 "이미지 파일이 아닙니다"
*/
var arrimg = ["jpg","png","gif","bmp","jpeg"];
var arroffice = ["hwp","pdf","xls","pptx","show","cell","doc"];

function chkFile(chk, msg){
	// chk : 받아와서 판별로 사용 할것 
	// msg : 문자열로 받아 와서 출력할때 쓸것

	var filePath = document.frm.extFile.value;
	//filePath : 사용자가 올린 파일의 로컬 경로를 담고 있는 상태
	// C:\fakepath\icon03.png
	// 해당 경로에서 우리가 필요한건 맨끝에 있는 확장자만 필요함
	// 첨부된 파일경로에서 확장자만 잘라내서
	// 잘라낸 확장자랑 배열안에 있는 값이랑 비교를 해서
	// 맞는게 있으면  >>>>  이미지/오피스 파일이 맞는거

	var ext = filePath.lastIndexOf("."); // .의 인덱스값
	var st = filePath.substring(ext+1); // 첨부된 파일의 확장자만

	// lastIndexOf() : 뒤에서부터 "." 위치를 리천해주는 메소드
	// .substring(인덱스값) : 인덱스값부터 끝까지 출력
	// .substring(인덱스값,인수-1) : 인덱스값부터 인수-1까지 출력
	
	for(var i = 0; i < eval("arr"+chk).length ; i++){
		if(st == eval("arr"+chk)[i]){
			alert(msg + "파일입니다");
			return true;
		}
	}
	alert(msg + "아닙니다");
}

</script>
</body>
</html>